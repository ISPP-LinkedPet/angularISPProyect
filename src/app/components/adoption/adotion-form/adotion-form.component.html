<div class="container">
    <div class="card border-primary mb-3">
    <div class="card-body">
        <h1 class="card-title">Crear nueva publicacion</h1>
        <form [formGroup]="adoptionForm" (ngSubmit)="onSubmit()">
            <fieldset>
                <legend class="card-title">Información básica</legend>
                <!-- Breed -->
                <div class="form-group col-sm" *ngIf="isValidBreed">
                    <label for="age">Raza</label>
                    <input type="text" class="form-control" id="breed" formControlName="breed">
                </div>

                <div class="form-group has-danger col-sm"*ngIf="!isValidBreed">

                  <div class="form-group">
                    <label for="age">Raza</label>
                    <input type="text" class="form-control is-invalid" id="breed" formControlName="breed">
                    <div class="invalid-feedback">Debe seleccionar una raza</div>
                </div>

                </div>

                <!-- Genre -->
                <div class="form-group has-danger col-sm" *ngIf="isValidGenre">
                    <label for="genre">Genero</label>
                    <select class="form-control" id="genre" formControlName="genre">
                        <option value='' [defaultSelected]=true>Seleccione genero</option>
                        <option value='Male'>Macho</option>
                        <option value='Female'>Hembra</option>
                    </select> 
                </div>

                <div class="form-group has-dange col-sm"*ngIf="!isValidGenre">
                  <label for="genre">Genero</label>
                  <select class="form-control is-invalid" id="genre" formControlName="genre">
                      <option value='' [defaultSelected]=true>Seleccione genero</option>
                      <option value='Male'>Macho</option>
                      <option value='Female'>Hembra</option>
                  </select> 
                  <div class="invalid-feedback">Debe seleccionar un género</div>
                </div>
                <!-- Age -->
                <div class="form-group col-sm" *ngIf="isValidAge">
                    <label for="age">Edad</label>
                    <input type="date" class="form-control" id="age" formControlName="age">
                </div>
                <div class="form-group has-danger col-sm"*ngIf="!isValidAge">
                    <label for="age">Edad</label>
                    <input type="date" class="form-control is-invalid" id="age" formControlName="age">
                    <div class="invalid-feedback">La fecha de nacimiento no puede estar en blanco</div>
                </div>

                <!-- Nombre -->
                <div class="form-group col-sm" *ngIf="isValidName">
                  <label for="name">Nombre</label>
                  <input type="text" class="form-control" id="name" formControlName="name" (change)="validateName()">
                </div>

              <div class="form-group has-danger col-sm" *ngIf="!isValidName">
                  <label class="form-control-label" for="name">Nombre</label>
                  <input type="text" class="form-control is-invalid" id="name" formControlName="name" (change)="validateName()">
                  <div class="invalid-feedback">El nombre no puede estar en blanco</div>
              </div>
              <!-- Zona -->
                <div class="form-group col-sm" *ngIf="isValidLocation">
                  <label for="location">Zona</label>
                  <input type="text" class="form-control" id="location"  formControlName="location" (change)="validateLocation()">
              </div>
              <div class="form-group has-danger col-sm" *ngIf="!isValidLocation">
                  <label class="form-control-label" for="age">Zona</label>
                  <input type="text" class="form-control is-invalid" id="location" value="{{acho}}" formControlName="location" (change)="validateLocation()">
                  <div class="invalid-feedback">Parece que se ha equivocado</div>
              </div>

              <!-- Taxes -->
            <div *ngIf="rol=='shelter'">
              <!-- Only for shelter--> 
                <div class="form-group col-4" *ngIf="isValidTaxes">
                  <label class="form-control-label" for="taxes">Tasas</label>
                  <div class="input-group mb-3">
                      <div class="input-group-prepend">
                          <span class="input-group-text">$</span>
                      </div>
                      <input type="text" class="form-control" formControlName="taxes" aria-label="Amount (to the nearest dollar)" (change)="validateTaxes()">
                      <div class="input-group-append">
                          <span class="input-group-text">.00</span>
                      </div>
                  </div>
              </div>

              

              <div class="form-group has-danger  col-4" *ngIf="!isValidTaxes">
                <label class="form-control-label" for="taxes">Tasas</label>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">$</span>
                    </div>
                    <input type="text" class="form-control is-invalid" formControlName="taxes" aria-label="Amount (to the nearest dollar)" (change)="validateTaxes()">
                    <div class="input-group-append">
                        <span class="input-group-text">.00</span>
                    </div>
                    <div class="invalid-feedback">No puede estar en blanco ni tampoco puede ser menor que 0</div>
                </div>
            </div>
            </div>

            <!-- Animal images -->

                <div class="form-group col-8" *ngIf="isValidAnimalPhoto">
                  <label for="animal_photo">Imagenes</label>
                  <div class="input-group mb-3">
                    <div class="custom-file">
                      <input #animalPhoto type="file" class="custom-file-input" formControlName="animal_photo" id="animal_photo" (change)="validateAnimalPhoto()" multiple>
                      <label class="custom-file-label" for="animal_photo">Seleccionar imagenes</label>
                    </div>
                  </div>
                </div>

                <div class="form-group has-danger  col-8" *ngIf="!isValidAnimalPhoto">
                  <label for="animal_photo">Imagenes</label>
                  <div class="input-group mb-3">
                    <div class="custom-file">
                      <input #animalPhoto type="file" class="custom-file-input form-control is-invalid" formControlName="animal_photo" id="animal_photo" (change)="validateAnimalPhoto()" multiple>
                      <label class="custom-file-label" for="animal_photo">Debe seleccionar como mínimo 2 imagenes</label>
                    </div>
                  </div>
                </div>

              <!-- Pedigree-->

              <div class="form-group col-6" *ngIf="isValidPedigri">
                <label for="pedigree">Pedigrí</label>
                <select class="form-control" id="pedigree" formControlName="pedigree">
                  <option value='' [defaultSelected]=true></option>
                  <option value='true'>Si</option>
                  <option value='false'>No</option>
              </select> 
              </div>
              <div class="form-group has-danger col-6" *ngIf="!isValidPedigri">
                  <label class="form-control-label" for="age">Pedigrí</label>
                  <select class="form-control is-invalid" id="pedigree" formControlName="pedigree">
                    <option value='' [defaultSelected]=true></option>
                    <option value='true'>Si</option>
                    <option value='false'>No</option>
                </select> 
                  <div class="invalid-feedback">Debe indicar si es pedigrí</div>
              </div>

    
                
            </fieldset>
            <hr>

            <!-- Documentation -->

            <fieldset>

                <legend class="card-title">Documentación de la mascota</legend>

                <!-- Identification photo-->

                <div class="form-group col-8" *ngIf="isValidIdentificationPhoto">

                  <label for="identification_photo">Identificacion de mascota</label>
                  <div class="input-group mb-3">
                    <div class="custom-file">
                      <input #identificationPhoto type="file" class="custom-file-input" formControlName="identification_photo" id="identification_photo" (change)="validateIdentificationPhoto()" multiple>
                      <label class="custom-file-label" for="identification_photo">Seleccionar imagenes</label>
                    </div>
                  </div>
                </div>

                <div class="form-group has-danger col-8" *ngIf="!isValidIdentificationPhoto">

                  <label for="identification_photo">Identificacion de mascota</label>
                  <div class="input-group mb-3">
                    <div class="custom-file" *ngIf="!isValidIdentificationPhoto">
                      <input #identificationPhoto type="file" class="custom-file-input form-control is-invalid" formControlName="identification_photo" id="identification_photo" (change)="validateIdentificationPhoto()" multiple>
                      <label class="custom-file-label" for="identification_photo">Debe selccionar una imagen como mínimo una imagen</label>
                    </div>
                  </div>
                </div>
              
              <!-- Vaccine passaport-->

              <div class="form-group col-8" *ngIf="isValidVaccinePassaport">
                  <label for="vaccine_passaport">Cartilla de vacunacion</label>
                  <div class="input-group mb-3">
                    <div class="custom-file">
                      <input #vaccinePassaport type="file" class="custom-file-input" formControlName="vaccine_passaport" id="vaccine_passaport" (change)="validateVaccinePassaport()" multiple>
                      <label class="custom-file-label" for="vaccine_passaport">Seleccionar imagenes</label>
                    </div>
                  </div>
              </div>

              <div class="form-group has-danger col-8" *ngIf="!isValidVaccinePassaport">
                <label for="vaccine_passaport" class="form-control-label" >Cartilla de vacunacion</label>
                <div class="input-group mb-3">
                  <div class="custom-file">
                    <input #vaccinePassaport type="file" class="custom-file-input form-control is-invalid" formControlName="vaccine_passaport" id="vaccine_passaport" (change)="validateVaccinePassaport()" multiple>
                    <label class="custom-file-label" for="vaccine_passaport">Debe selccionar una imagen como mínimo</label>
                  </div>
                </div>
            </div>


            </fieldset>
                <button type="submit" class="btn btn-primary btn-lg button-form">Crear</button>
                <button type="button" class="btn btn-secondary btn-lg button-form right" routerLink="/adoption-list">Cancelar</button>
        </form>
    </div>
    </div>
</div>